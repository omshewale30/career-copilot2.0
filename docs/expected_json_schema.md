# Expected JSON Schema for Tailored Resumes

This document defines the expected JSON structure for tailored resumes generated by the AI. All generated JSON must conform to this schema, which is enforced by Pydantic validation in `src/models.py`.

## Complete Schema

```json
{
  "contact_info": {
    "first_name": "string",
    "last_name": "string",
    "phone": "string",
    "email": "string",
    "location": "string",
    "linkedin_url": "string",
    "github_url": "string",
    "portfolio_url": "string"
  },
  "professional_summaries": "",
  "work_authorization": "string or null",
  "education": [
    {
      "institution": "string",
      "degree": "string",
      "start_date": "string",
      "graduation_date": "string",
      "gpa": "string (empty string if not applicable)"
    }
  ],
  "skills": {
    "Languages": "comma-separated string (max 95 chars)",
    "Frameworks": "comma-separated string (max 95 chars)",
    "Developer Tools": "comma-separated string (max 95 chars)",
    "Libraries": "comma-separated string (max 95 chars)"
  },
  "work_experience": [
    {
      "job_title": "string",
      "company": "string",
      "start_date": "string",
      "end_date": "string",
      "location": "string or null",
      "bullet_points": [
        "string (max 110 chars)",
        "string (max 110 chars)",
        "string (max 110 chars)",
        "string (max 110 chars)"
      ]
    }
  ],
  "projects": [
    {
      "project_name": "string",
      "technologies": ["string", "string", "string"],
      "project_url": "string",
      "description": "string or null",
      "bullet_points": [
        "string (max 110 chars)",
        "string (max 110 chars)",
        "string (max 110 chars)",
        "string (max 110 chars)"
      ]
    }
  ]
}
```

---

## Critical Field Names

### ⚠️ IMPORTANT: Common Mistakes to Avoid

#### 1. Education Section - graduation_date
- ✅ **CORRECT**: `"graduation_date": "May 2022"`
- ❌ **WRONG**: `"end_date": "May 2022"`
- **Note**: The education model uses `graduation_date`, NOT `end_date`

#### 2. Work Experience - job_title
- ✅ **CORRECT**: `"job_title": "Senior Software Engineer"`
- ❌ **WRONG**: `"position": "Senior Software Engineer"`
- **Note**: The work experience model uses `job_title`, NOT `position`

#### 3. Project Technologies - Array Format
- ✅ **CORRECT**: `"technologies": ["React", "Node.js", "MongoDB"]`
- ❌ **WRONG**: `"technologies": "React, Node.js, MongoDB"`
- **CRITICAL**: Must be an array of strings, NOT a comma-separated string

#### 4. Professional Summaries - Empty String
- ✅ **CORRECT**: `"professional_summaries": ""`
- ❌ **WRONG**: `"professional_summaries": "Experienced software engineer..."`
- **Note**: This field MUST be an empty string to maximize content space

#### 5. Skills - Dictionary Format
- ✅ **CORRECT**: `"skills": {"Languages": "Python, Java, C++", "Frameworks": "React, Django"}`
- ❌ **WRONG**: `"skills": ["Python", "Java", "C++"]`
- **Note**: Skills must be a dictionary with category names as keys

---

## Validation Rules

### Character Limits

#### Bullet Points
- **Maximum**: 110 characters per bullet point
- **Applies to**: Work experience and project bullet points
- **Validation**: Each bullet point is checked individually
- **Error**: "Bullet point {n} exceeds 110 characters ({actual} chars)"

#### Skills Categories
- **Maximum**: 95 characters per category value (when joined with commas)
- **Applies to**: Each skill category in the skills dictionary
- **Example**: `"Languages": "Python, JavaScript, Java, C++"` (must be ≤ 95 chars)
- **Error**: "Skills in category '{category}' exceed 95 characters"

#### Technologies
- **Maximum**: 95 characters when joined with ", "
- **Applies to**: Project technologies array
- **Example**: `["React", "Node.js", "MongoDB"]` → "React, Node.js, MongoDB" (must be ≤ 95 chars)
- **Error**: "Technologies exceed 95 characters when joined"

### Array Length Constraints

#### Work Experience
- **Minimum**: 3 entries
- **Maximum**: 3 entries
- **Exactly**: Must have exactly 3 work experience entries
- **Error**: "ensure this value has at least 3 items" or "ensure this value has at most 3 items"

#### Projects
- **Minimum**: 3 entries
- **Maximum**: 3 entries
- **Exactly**: Must have exactly 3 project entries
- **Error**: "ensure this value has at least 3 items" or "ensure this value has at most 3 items"

#### Education
- **Minimum**: 1 entry
- **Maximum**: No limit
- **Note**: At least one education entry is required

#### Bullet Points
- **Minimum**: 4 bullet points per entry
- **Maximum**: 4 bullet points per entry
- **Exactly**: Each work experience and project must have exactly 4 bullet points
- **Error**: "ensure this value has at least 4 items" or "ensure this value has at most 4 items"

### Required vs Optional Fields

#### Required Fields (Cannot be null or missing)
- `contact_info.first_name`
- `contact_info.last_name`
- `contact_info.phone`
- `contact_info.email`
- `contact_info.location`
- `contact_info.linkedin_url`
- `contact_info.github_url`
- `contact_info.portfolio_url`
- `professional_summaries` (must be empty string)
- `education` (array, min 1 entry)
- `education[].institution`
- `education[].degree`
- `education[].start_date`
- `education[].graduation_date`
- `skills` (dictionary)
- `work_experience` (array, exactly 3 entries)
- `work_experience[].job_title`
- `work_experience[].company`
- `work_experience[].start_date`
- `work_experience[].end_date`
- `work_experience[].bullet_points` (array, exactly 4 items)
- `projects` (array, exactly 3 entries)
- `projects[].project_name`
- `projects[].technologies` (array)
- `projects[].project_url`
- `projects[].bullet_points` (array, exactly 4 items)

#### Optional Fields (Can be null or empty string)
- `work_authorization` (can be null)
- `education[].gpa` (empty string if not applicable)
- `work_experience[].location` (can be null)
- `projects[].description` (can be null)

---

## Field Descriptions

### contact_info

#### first_name
- **Type**: String
- **Required**: Yes
- **Purpose**: Candidate's first name
- **Example**: `"John"`

#### last_name
- **Type**: String
- **Required**: Yes
- **Purpose**: Candidate's last name
- **Example**: `"Smith"`

#### phone
- **Type**: String
- **Required**: Yes
- **Purpose**: Contact phone number
- **Format**: Any format accepted (will be formatted by template)
- **Example**: `"+1 (555) 123-4567"` or `"555-123-4567"`

#### email
- **Type**: String
- **Required**: Yes
- **Purpose**: Professional email address
- **Example**: `"john.smith@email.com"`

#### location
- **Type**: String
- **Required**: Yes
- **Purpose**: City and state/country
- **Example**: `"San Francisco, CA"` or `"Remote"`

#### linkedin_url
- **Type**: String
- **Required**: Yes
- **Purpose**: LinkedIn profile URL
- **Example**: `"linkedin.com/in/johnsmith"` or `"https://linkedin.com/in/johnsmith"`

#### github_url
- **Type**: String
- **Required**: Yes
- **Purpose**: GitHub profile URL
- **Example**: `"github.com/johnsmith"` or `"https://github.com/johnsmith"`

#### portfolio_url
- **Type**: String
- **Required**: Yes
- **Purpose**: Personal website or portfolio URL
- **Example**: `"johnsmith.dev"` or `"https://johnsmith.dev"`

---

### professional_summaries
- **Type**: String (empty)
- **Required**: Yes
- **Value**: Must be empty string `""`
- **Purpose**: Reserved field, kept empty to maximize space for other content
- **Validation**: Will raise error if non-empty

---

### work_authorization
- **Type**: String or null
- **Required**: No
- **Purpose**: Work authorization status
- **Example**: `"Authorized to work in the US for any employer"` or `null`

---

### education

#### institution
- **Type**: String
- **Required**: Yes
- **Purpose**: Name of educational institution
- **Example**: `"Stanford University"`

#### degree
- **Type**: String
- **Required**: Yes
- **Purpose**: Degree type and major (GPA can be included here)
- **Example**: `"Bachelor of Science in Computer Science, GPA: 3.8/4.0"`

#### start_date
- **Type**: String
- **Required**: Yes
- **Purpose**: When studies began
- **Format**: "Month Year" or "MMM YYYY"
- **Example**: `"August 2018"` or `"Aug 2018"`

#### graduation_date
- **Type**: String
- **Required**: Yes
- **Purpose**: When studies ended or expected to end
- **Format**: "Month Year" or "Present"
- **Example**: `"May 2022"` or `"Present"`
- **⚠️ CRITICAL**: Must be `graduation_date`, NOT `end_date`

#### gpa
- **Type**: String
- **Required**: Yes (but can be empty string)
- **Purpose**: Grade point average (usually included in degree field instead)
- **Value**: Typically empty string `""`
- **Example**: `""` (empty) or `"3.8/4.0"` if not in degree field

---

### skills
- **Type**: Dictionary (object)
- **Required**: Yes
- **Purpose**: Technical and soft skills organized by category
- **Format**: `{"Category Name": "comma-separated skills"}`
- **Character Limit**: Each category value max 95 characters
- **Common Categories**:
  - `"Languages"`: Programming languages
  - `"Frameworks"`: Web frameworks, libraries
  - `"Developer Tools"`: IDEs, version control, etc.
  - `"Libraries"`: Specific libraries and packages
- **Example**:
```json
{
  "Languages": "Python, JavaScript, Java, C++, SQL",
  "Frameworks": "React, Django, Node.js, Flask",
  "Developer Tools": "Git, Docker, AWS, VS Code",
  "Libraries": "NumPy, Pandas, TensorFlow, PyTorch"
}
```

---

### work_experience

#### job_title
- **Type**: String
- **Required**: Yes
- **Purpose**: Job title or position
- **Example**: `"Senior Software Engineer"`
- **⚠️ Note**: Field name is `job_title`, NOT `position`

#### company
- **Type**: String
- **Required**: Yes
- **Purpose**: Employer name
- **Example**: `"Google"`

#### start_date
- **Type**: String
- **Required**: Yes
- **Purpose**: Employment start date
- **Format**: "Month Year" or "MMM YYYY"
- **Example**: `"January 2020"` or `"Jan 2020"`

#### end_date
- **Type**: String
- **Required**: Yes
- **Purpose**: Employment end date
- **Format**: "Month Year" or "Present"
- **Example**: `"December 2023"` or `"Present"`

#### location
- **Type**: String or null
- **Required**: No
- **Purpose**: Job location
- **Example**: `"Mountain View, CA"` or `"Remote"` or `null`

#### bullet_points
- **Type**: Array of strings
- **Required**: Yes
- **Length**: Exactly 4 bullet points
- **Character Limit**: Each bullet point max 110 characters
- **Purpose**: Key achievements and responsibilities
- **Example**:
```json
[
  "Designed and implemented scalable microservices architecture serving 10M+ users",
  "Led team of 5 engineers in developing real-time data processing pipeline",
  "Reduced API latency by 40% through optimization and caching strategies",
  "Mentored junior developers and conducted code reviews for quality assurance"
]
```

---

### projects

#### project_name
- **Type**: String
- **Required**: Yes
- **Purpose**: Name of the project
- **Example**: `"E-commerce Platform"`

#### technologies
- **Type**: Array of strings
- **Required**: Yes
- **Purpose**: Technologies and tools used in the project
- **Character Limit**: When joined with ", " must be ≤ 95 characters
- **⚠️ CRITICAL**: Must be an array, NOT a comma-separated string
- **Example**: `["React", "Node.js", "MongoDB", "AWS"]`

#### project_url
- **Type**: String
- **Required**: Yes
- **Purpose**: Link to project (GitHub, live demo, etc.)
- **Example**: `"github.com/user/ecommerce-platform"`

#### description
- **Type**: String or null
- **Required**: No
- **Purpose**: Brief project description (usually omitted, details in bullet points)
- **Example**: `null` or `"Full-stack web application for online shopping"`

#### bullet_points
- **Type**: Array of strings
- **Required**: Yes
- **Length**: Exactly 4 bullet points
- **Character Limit**: Each bullet point max 110 characters
- **Purpose**: Project achievements and technical details
- **Example**:
```json
[
  "Built full-stack application with React frontend and Node.js backend",
  "Implemented secure payment processing using Stripe API integration",
  "Deployed on AWS with auto-scaling and load balancing for high availability",
  "Achieved 99.9% uptime with comprehensive error handling and monitoring"
]
```

---

## Template Integration

The JSON structure maps directly to the Jinja2 template (`templates/resume.jinja2`):

### Contact Information
```jinja2
\VAR{contact_info.first_name} \VAR{contact_info.last_name}
\VAR{contact_info.email} | \VAR{contact_info.phone|format_phone}
```

### Education Section
```jinja2
\VAR{edu.institution} \hfill \VAR{edu.start_date|format_date} -- \VAR{edu.graduation_date|format_date}
\VAR{edu.degree|latex_escape}
```

### Work Experience Section
```jinja2
\textbf{\VAR{exp.job_title|latex_escape}} | \VAR{exp.company|latex_escape}
\BLOCK{for bullet in exp.bullet_points}
\item \VAR{bullet|latex_escape}
\BLOCK{endfor}
```

### Projects Section
```jinja2
\textbf{\VAR{project.project_name|latex_escape}} | \VAR{project.technologies|join(', ')|latex_escape}
\BLOCK{for bullet in project.bullet_points}
\item \VAR{bullet|latex_escape}
\BLOCK{endfor}
```

### Skills Section
```jinja2
\BLOCK{for category, skills in skills.items()}
\textbf{\VAR{category}}: \VAR{skills|latex_escape}
\BLOCK{endfor}
```

---

## Pydantic Validation

The schema is enforced by Pydantic models in `src/models.py`. When validation fails:

1. **Pipeline Halts**: Processing stops immediately
2. **Error Display**: Detailed error messages show which fields failed
3. **Debug Output**: Invalid JSON saved to `output/debug/Resume_INVALID.json`
4. **Error Categories**:
   - Missing required field
   - Wrong data type
   - Character limit exceeded
   - Array length mismatch
   - Invalid field name

---

## Example Valid JSON

```json
{
  "contact_info": {
    "first_name": "John",
    "last_name": "Smith",
    "phone": "+1 (555) 123-4567",
    "email": "john.smith@email.com",
    "location": "San Francisco, CA",
    "linkedin_url": "linkedin.com/in/johnsmith",
    "github_url": "github.com/johnsmith",
    "portfolio_url": "johnsmith.dev"
  },
  "professional_summaries": "",
  "work_authorization": "Authorized to work in the US for any employer",
  "education": [
    {
      "institution": "Stanford University",
      "degree": "Bachelor of Science in Computer Science, GPA: 3.8/4.0",
      "start_date": "August 2018",
      "graduation_date": "May 2022",
      "gpa": ""
    }
  ],
  "skills": {
    "Languages": "Python, JavaScript, Java, C++, SQL, TypeScript",
    "Frameworks": "React, Django, Node.js, Flask, Express",
    "Developer Tools": "Git, Docker, AWS, Kubernetes, Jenkins",
    "Libraries": "NumPy, Pandas, TensorFlow, PyTorch, Scikit-learn"
  },
  "work_experience": [
    {
      "job_title": "Senior Software Engineer",
      "company": "Google",
      "start_date": "January 2023",
      "end_date": "Present",
      "location": "Mountain View, CA",
      "bullet_points": [
        "Designed scalable microservices architecture serving 10M+ daily active users",
        "Led team of 5 engineers in developing real-time data processing pipeline",
        "Reduced API latency by 40% through caching and query optimization",
        "Mentored junior developers and conducted code reviews for quality"
      ]
    },
    {
      "job_title": "Software Engineer",
      "company": "Microsoft",
      "start_date": "June 2022",
      "end_date": "December 2022",
      "location": "Seattle, WA",
      "bullet_points": [
        "Developed cloud-based analytics platform using Azure services",
        "Implemented CI/CD pipeline reducing deployment time by 60%",
        "Collaborated with product team to define technical requirements",
        "Optimized database queries improving performance by 35%"
      ]
    },
    {
      "job_title": "Software Engineering Intern",
      "company": "Amazon",
      "start_date": "June 2021",
      "end_date": "August 2021",
      "location": "Seattle, WA",
      "bullet_points": [
        "Built recommendation engine using machine learning algorithms",
        "Processed 1M+ data points daily with distributed computing",
        "Created RESTful APIs for internal tools and services",
        "Participated in agile development and sprint planning"
      ]
    }
  ],
  "projects": [
    {
      "project_name": "E-commerce Platform",
      "technologies": ["React", "Node.js", "MongoDB", "AWS"],
      "project_url": "github.com/johnsmith/ecommerce",
      "description": null,
      "bullet_points": [
        "Built full-stack application with React frontend and Node.js backend",
        "Implemented secure payment processing using Stripe API",
        "Deployed on AWS with auto-scaling and load balancing",
        "Achieved 99.9% uptime with comprehensive error handling"
      ]
    },
    {
      "project_name": "Machine Learning Pipeline",
      "technologies": ["Python", "TensorFlow", "Docker", "Kubernetes"],
      "project_url": "github.com/johnsmith/ml-pipeline",
      "description": null,
      "bullet_points": [
        "Developed automated ML pipeline for model training and deployment",
        "Containerized services using Docker for consistent environments",
        "Orchestrated with Kubernetes for scalability and reliability",
        "Reduced model training time by 50% through optimization"
      ]
    },
    {
      "project_name": "Real-time Chat Application",
      "technologies": ["React", "Socket.io", "Redis", "PostgreSQL"],
      "project_url": "github.com/johnsmith/chat-app",
      "description": null,
      "bullet_points": [
        "Created real-time messaging app supporting 1000+ concurrent users",
        "Implemented WebSocket connections for instant message delivery",
        "Used Redis for caching and session management",
        "Built responsive UI with React and Material-UI components"
      ]
    }
  ]
}
```

---

## Troubleshooting

### Common Validation Errors

#### 1. "Field 'education -> 0 -> graduation_date': field required"
- **Cause**: Used `end_date` instead of `graduation_date`
- **Fix**: Change field name to `graduation_date` in education entries

#### 2. "Field 'work_experience -> 0 -> job_title': field required"
- **Cause**: Used `position` instead of `job_title`
- **Fix**: Change field name to `job_title` in work experience entries

#### 3. "Field 'projects -> 0 -> technologies': value is not a valid list"
- **Cause**: Technologies provided as comma-separated string instead of array
- **Fix**: Change `"technologies": "React, Node.js"` to `"technologies": ["React", "Node.js"]`

#### 4. "Bullet point 1 exceeds 110 characters"
- **Cause**: Bullet point is too long
- **Fix**: Shorten the bullet point to 110 characters or less

#### 5. "ensure this value has at least 3 items"
- **Cause**: Work experience or projects array has fewer than 3 entries
- **Fix**: Add more entries to reach exactly 3

#### 6. "ensure this value has at most 3 items"
- **Cause**: Work experience or projects array has more than 3 entries
- **Fix**: Remove entries to have exactly 3

#### 7. "professional_summaries must be empty string"
- **Cause**: Provided content in professional_summaries field
- **Fix**: Set `"professional_summaries": ""`

#### 8. "Skills in category 'Languages' exceed 95 characters"
- **Cause**: Comma-separated skills string is too long
- **Fix**: Shorten the skills list or use abbreviations

#### 9. "Technologies exceed 95 characters when joined"
- **Cause**: Technologies array becomes too long when joined with ", "
- **Fix**: Reduce number of technologies or use shorter names

---

## Version History

- **v3.0** (October 2025): Current schema
  - Exact array lengths (3 work experiences, 3 projects)
  - 110-character bullet point limit
  - 95-character limit for skills and technologies
  - Empty professional_summaries field
  - job_title instead of position
  - graduation_date instead of end_date in education
